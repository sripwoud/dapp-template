amends "package://github.com/jdx/hk/releases/download/v1.1.1/hk@1.1.1#/Config.pkl"

local linters  = new Mapping<String, Step> {
  ["biome"]  {
    check = "biome lint --config-path=.biome.jsonc --no-errors-on-unmatched {{files}}"
    glob = List("*.js", "*.jsx", "*.ts", "*.tsx")
  }
  ["dprint"]  {
    fix = "dprint fmt"
    stage = "*"
  }
  ["solhint"] {
    check = "solhint --config contracts/.solhint.json --ignore-path contracts/.solhintignore contracts/**/*.sol"
    glob = List("*.sol")
  }
  ["typescript"]  {
    check = "tsc -p web/tsconfig.app.json"
    glob = List("*js", "*.ts", "*.tsx")
  }
}

hooks {
    ["pre-commit"] {
        fix = true
        stash = "git"
        steps = linters
    }
}
